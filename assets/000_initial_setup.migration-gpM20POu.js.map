{"version":3,"file":"000_initial_setup.migration-gpM20POu.js","sources":["../../src/utils/db/migrations/000_initial_setup.migration.ts"],"sourcesContent":["// src/migrations/000_initial_setup.migration.ts\nimport { Migration } from \"../../../types/migration\";\nimport { getDB } from \"../config\";\nimport { categoryOperations } from \"../operations\";\n\nconst migration: Migration = {\n\tversion: 0,\n\tname: \"initial_setup\",\n\tmigrate: async () => {\n\t\t// Create main storage folders\n\t\tconst storage = await categoryOperations.create({\n\t\t\tname: \"Storage\",\n\t\t\tcolor: \"#3B82F6\",\n\t\t\tdescription: \"Main storage areas\",\n\t\t\tisFolder: true,\n\t\t});\n\n\t\tconst furniture = await categoryOperations.create({\n\t\t\tname: \"Furniture\",\n\t\t\tcolor: \"#10B981\",\n\t\t\tdescription: \"Furniture storage\",\n\t\t\tisFolder: true,\n\t\t});\n\n\t\t// Add subcategories\n\t\tawait Promise.all([\n\t\t\t// Storage subcategories\n\t\t\tcategoryOperations.create({\n\t\t\t\tname: \"Storage Boxes\",\n\t\t\t\tcolor: \"#F97316\",\n\t\t\t\tdescription: \"Items in storage boxes\",\n\t\t\t\tparentId: storage.id,\n\t\t\t\tisFolder: false,\n\t\t\t}),\n\t\t\tcategoryOperations.create({\n\t\t\t\tname: \"Wall Shelves\",\n\t\t\t\tcolor: \"#14B8A6\",\n\t\t\t\tdescription: \"Items on wall-mounted shelves\",\n\t\t\t\tparentId: storage.id,\n\t\t\t\tisFolder: false,\n\t\t\t}),\n\n\t\t\t// Furniture subcategories\n\t\t\tcategoryOperations.create({\n\t\t\t\tname: \"Desk Drawers\",\n\t\t\t\tcolor: \"#10B981\",\n\t\t\t\tdescription: \"Items in desk drawers\",\n\t\t\t\tparentId: furniture.id,\n\t\t\t\tisFolder: false,\n\t\t\t}),\n\t\t\tcategoryOperations.create({\n\t\t\t\tname: \"Wardrobe\",\n\t\t\t\tcolor: \"#F59E0B\",\n\t\t\t\tdescription: \"Clothes and items in wardrobe\",\n\t\t\t\tparentId: furniture.id,\n\t\t\t\tisFolder: false,\n\t\t\t}),\n\t\t\tcategoryOperations.create({\n\t\t\t\tname: \"Bedside Cabinet\",\n\t\t\t\tcolor: \"#8B5CF6\",\n\t\t\t\tdescription: \"Items in bedside drawers\",\n\t\t\t\tparentId: furniture.id,\n\t\t\t\tisFolder: false,\n\t\t\t}),\n\t\t\tcategoryOperations.create({\n\t\t\t\tname: \"Under-bed Storage\",\n\t\t\t\tcolor: \"#EC4899\",\n\t\t\t\tdescription: \"Items stored under the bed\",\n\t\t\t\tparentId: furniture.id,\n\t\t\t\tisFolder: false,\n\t\t\t}),\n\t\t]);\n\n\t\tconst db = await getDB();\n\t\tawait db.put(\"migrations\", {\n\t\t\tversion: 0,\n\t\t\ttimestamp: new Date(),\n\t\t});\n\t},\n\trollback: async () => {\n\t\tconst db = await getDB();\n\t\tconst categories = await categoryOperations.getAll();\n\n\t\tfor (const category of categories) {\n\t\t\tawait categoryOperations.delete(category.id);\n\t\t}\n\n\t\tawait db.delete(\"migrations\", 0);\n\t},\n};\n\nexport default migration;\n"],"names":["migration","storage","categoryOperations","furniture","getDB","db","categories","category"],"mappings":"uLAKA,MAAMA,EAAuB,CAC5B,QAAS,EACT,KAAM,gBACN,QAAS,SAAY,CAEd,MAAAC,EAAU,MAAMC,EAAmB,OAAO,CAC/C,KAAM,UACN,MAAO,UACP,YAAa,qBACb,SAAU,EAAA,CACV,EAEKC,EAAY,MAAMD,EAAmB,OAAO,CACjD,KAAM,YACN,MAAO,UACP,YAAa,oBACb,SAAU,EAAA,CACV,EAGD,MAAM,QAAQ,IAAI,CAEjBA,EAAmB,OAAO,CACzB,KAAM,gBACN,MAAO,UACP,YAAa,yBACb,SAAUD,EAAQ,GAClB,SAAU,EAAA,CACV,EACDC,EAAmB,OAAO,CACzB,KAAM,eACN,MAAO,UACP,YAAa,gCACb,SAAUD,EAAQ,GAClB,SAAU,EAAA,CACV,EAGDC,EAAmB,OAAO,CACzB,KAAM,eACN,MAAO,UACP,YAAa,wBACb,SAAUC,EAAU,GACpB,SAAU,EAAA,CACV,EACDD,EAAmB,OAAO,CACzB,KAAM,WACN,MAAO,UACP,YAAa,gCACb,SAAUC,EAAU,GACpB,SAAU,EAAA,CACV,EACDD,EAAmB,OAAO,CACzB,KAAM,kBACN,MAAO,UACP,YAAa,2BACb,SAAUC,EAAU,GACpB,SAAU,EAAA,CACV,EACDD,EAAmB,OAAO,CACzB,KAAM,oBACN,MAAO,UACP,YAAa,6BACb,SAAUC,EAAU,GACpB,SAAU,EACV,CAAA,CAAA,CACD,EAGK,MADK,MAAMC,EAAM,GACd,IAAI,aAAc,CAC1B,QAAS,EACT,cAAe,IAAK,CACpB,CACF,EACA,SAAU,SAAY,CACf,MAAAC,EAAK,MAAMD,EAAM,EACjBE,EAAa,MAAMJ,EAAmB,OAAO,EAEnD,UAAWK,KAAYD,EAChB,MAAAJ,EAAmB,OAAOK,EAAS,EAAE,EAGtC,MAAAF,EAAG,OAAO,aAAc,CAAC,CAAA,CAEjC"}